<form hx-post="/reviews" hx-target="#review-modal-content" hx-swap="innerHTML" class="space-y-4">
    <input type="hidden" name="booking_id" value="{{ booking_id }}">
    <input type="hidden" name="reviewee_id" value="{{ reviewee.id }}">
    
    <!-- Reviewee Info -->
    <div class="flex items-center gap-3 p-4 bg-apple-gray-50 rounded-xl">
        <div class="w-12 h-12 bg-apple-gray-200 rounded-full flex items-center justify-center">
            <span class="text-lg font-medium text-apple-gray-600">{{ reviewee.full_name[0] if reviewee else '?' }}</span>
        </div>
        <div>
            <p class="font-medium text-apple-gray-600">{{ reviewee.full_name if reviewee else 'Unknown' }}</p>
            <p class="text-sm text-apple-gray-500">{{ reviewee.role.value|capitalize if reviewee else '' }}</p>
        </div>
    </div>
    
    <!-- Star Rating -->
    <div>
        <label class="block text-sm font-medium text-apple-gray-700 mb-2">Rating</label>
        <div class="flex items-center gap-1" id="star-rating">
            {% for i in range(1, 6) %}
            <button 
                type="button" 
                class="text-3xl text-apple-gray-300 hover:text-yellow-400 transition-colors star-btn"
                data-value="{{ i }}"
                onclick="setRating({{ i }})"
            >â˜…</button>
            {% endfor %}
        </div>
        <input type="hidden" name="rating" id="rating-input" value="5" required>
    </div>
    
    <!-- Comment -->
    <div>
        <label class="block text-sm font-medium text-apple-gray-700 mb-1">Comment (optional)</label>
        <textarea 
            name="comment" 
            rows="3" 
            class="input-apple resize-none"
            placeholder="Share your experience..."
            maxlength="500"
        ></textarea>
    </div>
    
    <div class="pt-4 flex gap-3">
        <button type="button" onclick="document.getElementById('review-modal').classList.add('hidden')" class="btn-secondary flex-1">
            Cancel
        </button>
        <button type="submit" class="btn-primary flex-1">
            Submit Review
        </button>
    </div>
</form>

<script>
function setRating(value) {
    document.getElementById('rating-input').value = value;
    const stars = document.querySelectorAll('.star-btn');
    stars.forEach((star, index) => {
        if (index < value) {
            star.classList.remove('text-apple-gray-300');
            star.classList.add('text-yellow-400');
        } else {
            star.classList.remove('text-yellow-400');
            star.classList.add('text-apple-gray-300');
        }
    });
}
// Default to 5 stars
setRating(5);
</script>

