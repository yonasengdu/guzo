{% extends "dashboard_base.html" %}

{% block title %}Trip History - Guzo{% endblock %}

{% block dashboard_content %}
<!-- Header -->
<div class="mb-8">
    <h1 class="text-3xl font-semibold text-apple-gray-600">Trip History</h1>
    <p class="text-apple-gray-400 mt-1">View your past trips and rebook favorites</p>
</div>

<!-- Filter Tabs -->
<div class="card-apple p-4 mb-6">
    <div class="flex items-center gap-2">
        <button 
            class="px-4 py-2 rounded-xl text-sm font-medium transition-all {% if not status_filter or status_filter == 'all' %}bg-apple-blue text-white{% else %}bg-apple-gray-100 text-apple-gray-600 hover:bg-apple-gray-200{% endif %}"
            hx-get="/customer/history?status=all"
            hx-target="#history-content"
            hx-swap="innerHTML"
        >All</button>
        <button 
            class="px-4 py-2 rounded-xl text-sm font-medium transition-all {% if status_filter == 'completed' %}bg-apple-blue text-white{% else %}bg-apple-gray-100 text-apple-gray-600 hover:bg-apple-gray-200{% endif %}"
            hx-get="/customer/history?status=completed"
            hx-target="#history-content"
            hx-swap="innerHTML"
        >Completed</button>
        <button 
            class="px-4 py-2 rounded-xl text-sm font-medium transition-all {% if status_filter == 'cancelled' %}bg-apple-blue text-white{% else %}bg-apple-gray-100 text-apple-gray-600 hover:bg-apple-gray-200{% endif %}"
            hx-get="/customer/history?status=cancelled"
            hx-target="#history-content"
            hx-swap="innerHTML"
        >Cancelled</button>
    </div>
</div>

<div id="history-content">
    {% include "partials/customer_history.html" %}
</div>

<!-- Rebook Result Toast -->
<div id="rebook-result" class="fixed bottom-4 right-4"></div>

<!-- Review Modal -->
<div id="review-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-lg w-full">
        <div class="p-6 border-b border-apple-gray-100">
            <div class="flex items-center justify-between">
                <h2 class="text-xl font-semibold text-apple-gray-600">Leave a Review</h2>
                <button onclick="document.getElementById('review-modal').classList.add('hidden')" class="text-apple-gray-400 hover:text-apple-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
        </div>
        <div id="review-modal-content" class="p-6">
            <!-- Content loaded via HTMX -->
        </div>
    </div>
</div>
{% endblock %}
